<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[rtoheaven's blog]]></title>
  <subtitle><![CDATA[Walk steps step by step]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://yoursite.com/"/>
  <updated>2014-11-05T03:33:00.218Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name><![CDATA[rtoheaven]]></name>
    <email><![CDATA[rtoheaven@163.com]]></email>
  </author>
  
  <generator uri="http://zespia.tw/hexo/">Hexo</generator>
  
  <entry>
    <title><![CDATA[windows����������]]></title>
    <link href="http://yoursite.com/2014/11/05/C%E8%AF%AD%E8%A8%80%E6%93%8D%E4%BD%9CSQLITE3%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>http://yoursite.com/2014/11/05/C语言操作SQLITE3数据库/</id>
    <published>2014-11-05T03:31:56.000Z</published>
    <updated>2014-11-05T03:31:57.000Z</updated>
    <content type="html"><![CDATA[<h2 id="һ���汾">һ���汾</h2>
<p>�� www.sqlite.org ��վ�����ص����µ� sqlite �����ͱ����汾����д������ʱ�����´����� 3.3.17 �汾��<br>�ܾ�û��ȥ���� sqlite �´��룬����Ҳ��֪�� sqlite �仯��ô������ǰ�ܶ��ļ�������ȫ���ϲ���һ�� sqlite3.c �ļ���<br>���������ô��ļ�����ͦ�õģ�ʡȥ����һ���ļ���������û����©������Ҳ����һ�����⣺���ļ�̫�󣬿��ӽ�7���д��룬VC�������������������� �ˡ�<br>��������Ҫ�������룬Ҳ�Ͳ���Ҫ���� sqlite3.c �ļ������󲻻��������ǣ�������Ҫдͨ���޸� sqlite �������ɼ��ܹ��ܣ���ʱ���ͱȽ�ʹ���ˡ�</p>
<h2 id="������������">������������</h2>
<p>����������˵�ˣ��� VC ���½� dos ����̨�հ׹��̣��� sqlite3.c �� sqlite3.h ���ӵ����̣����½�һ�� main.cpp �ļ���������д:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">extern</span> ��C��</div><div class="line">{</div><div class="line"><span class="preprocessor">#include ��./sqlite3.h��</span></div><div class="line">};</div><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span>** )</div><div class="line">{</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>ΪʲôҪ extern ��C�� ���������������⣬�Ҳ���˵̫�࣬����C++�Ļ�����Ҫ�� C++ ��ʹ��һ�� C �Ĵ��룬����Ҫ�� extern ��C�� ��������<br>C++�� C��Ȼ�﷨�����ص�������������������ͬ�Ķ������ڴ����Ĳ�������ȫ��ͬ�ģ���C++�������ﲻ��extern ��C������C���룬�ᵼ�±�������֪��������Ϊ C ���������ڴ沼�֡�<br>������ sqlite3.c ���˼��Ѿ������δ��붼 extern ��C�� �������ˣ�����������һ�� .c �ļ����Ծ�������һ�Σ�Ҳûʲô���á�<br>�������̾��������������ˡ����룬����ͨ����������һ�ѵ� warning�����Բ�������</p>
<h2 id="����SQLITE��������">����SQLITE��������</h2>
<p>sqlite�ṩ����һЩC�����ӿڣ�����������Щ�����������ݿ⡣ͨ��ʹ����Щ�ӿڣ�����һЩ��׼ sql ���䣨�� char * ���ͣ��� sqlite ������sqlite �ͻ�Ϊ���������ݿ⡣<br>sqlite ��MS��accessһ�����ļ������ݿ⣬����˵��һ�����ݿ�����һ���ļ��������ݿ������Խ����ܶ��ı����Խ����������������ȵȣ����ǣ���ʵ���ϵõ��ľ���һ���ļ���<br>���������ļ��ͱ������������ݿ⡣sqlite ����Ҫ�κ����ݿ����棬����ζ����������Ҫ sqlite ������һЩ�û����ݣ�����������Ҫ��װ���ݿ⡣<br>���濪ʼ�������ݿ�����������</p>
<h3 id="1_�������̣�1���ؼ����ݽṹ">1 �������̣�1���ؼ����ݽṹ</h3>
<p>sqlite ����õ�����sqlite3 <em> ���͡������ݿ��򿪿�ʼ��sqlite��ҪΪ��������׼�����ڴ棬ֱ�����ݿ��رգ��������̶���Ҫ�õ���������.<br>�����ݿ�����ʱ��ʼ���������͵ı����ʹ�������Ҫ���������ݿ⡣��������ϸ���ܡ�<br>��2���������ݿ�<br>int sqlite3_open( �ļ���, sqlite3 <em>* );<br>������������ʼ���ݿ�������<br>��Ҫ��������������һ�����ݿ��ļ��������磺c:\DongChunGuang_Database.db��<br>�ļ�������Ҫһ�����ڣ��������ļ������ڣ�sqlite ���Զ������������������ڣ��ͳ��԰��������ݿ��ļ����򿪡�<br>sqlite3 </em></em> ������ǰ���ᵽ�Ĺؼ����ݽṹ�������ṹ�ײ�ϸ�����Σ��㲻Ҫ������<br>��������ֵ��ʾ�����Ƿ���ȷ��������SQLITE_OK ����ʾ�������������صķ���ֵsqlite������һЩ�ꡣ������Щ���ĺ������Բο� sqlite3.h �ļ���<br>��������ϸ���壨˳��˵һ�£�sqlite3 �Ĵ���ע�����Գ��Ƿǳ��ߵģ�ʵ����Ҳ��ȷ�ܸߡ�ֻҪ���ῴӢ�ģ�sqlite ��������ѧ�����ٶ��󣩡�<br>�������ܹر����ݿ������ٸ�һ�βο����롣<br>��3���ر����ݿ�</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> sqlite3_close(sqlite3 *);</div><div class="line">ǰ�������� sqlite3_open ������һ�����ݿ⣬��βʱ��Ҫ���������������ر����ݿ⡣</div><div class="line">�������μ򵥵Ĵ��룺</div><div class="line"><span class="keyword">extern</span> ��C��</div><div class="line">{</div><div class="line"><span class="preprocessor">#include ��./sqlite3.h��</span></div><div class="line">};</div><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span>** )</div><div class="line">{</div><div class="line">sqlite3 * db = NULL; <span class="comment">//����sqlite�ؼ��ṹָ��</span></div><div class="line"><span class="keyword">int</span> result;</div><div class="line"></div><div class="line"><span class="comment">//�������ݿ�</span></div><div class="line"><span class="comment">//��Ҫ���� db ����ָ����ָ�룬��Ϊ sqlite3_open ����ҪΪ����ָ�������ڴ棬��Ҫ��dbָ��ָ�������ڴ���</span></div><div class="line">result = sqlite3_open( ��c:\\Dcg_database.db��, &db );</div><div class="line"><span class="keyword">if</span>( result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="comment">//���ݿ�����ʧ��</span></div><div class="line"><span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div><div class="line"><span class="comment">//���ݿ���������</span></div><div class="line"><span class="comment">//��</span></div><div class="line"></div><div class="line"><span class="comment">//���ݿ��򿪳ɹ�</span></div><div class="line"><span class="comment">//�ر����ݿ�</span></div><div class="line">sqlite3_close( db );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>������һ�����ݿ��������̡�</p>
<h3 id="2_SQL��������">2 SQL��������</h3>
<p>���ڽ���������sqlite ִ�б�׼ sql �﷨��</p>
<p>��1��ִ��sql����</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> sqlite3_exec(sqlite3*, <span class="keyword">const</span> <span class="keyword">char</span> *sql, sqlite3_callback, <span class="keyword">void</span> *,  <span class="keyword">char</span> **errmsg );</div><div class="line">������ִ��һ�� sql �����ĺ�����</div><div class="line">��<span class="number">1</span>����������˵�ˣ���ǰ��open�����õ���ָ�롣˵���ǹؼ����ݽṹ��</div><div class="line">��<span class="number">2</span>������<span class="keyword">const</span> <span class="keyword">char</span> *sql ��һ�� sql ���䣬��\<span class="number">0</span>��β��</div><div class="line">��<span class="number">3</span>������sqlite3_callback �ǻص󣬵���������ִ��֮����sqlite3��ȥ�������ṩ��������������ʲô�ǻص��������Լ��ұ�������ѧϰ��</div><div class="line">��<span class="number">4</span>������<span class="keyword">void</span> * �������ṩ��ָ�룬�����Դ����κ�һ��ָ����������������������ջᴫ���ص��������棬��������Ҫ����ָ�����ص�������������NULL��</div><div class="line">���������ٿ��ص�������д�����Լ�����������ʹ�á�</div><div class="line">�� <span class="number">5</span>������<span class="keyword">char</span> ** errmsg �Ǵ�����Ϣ��ע����ָ����ָ�롣</div><div class="line">sqlite3�����кܶ��̶��Ĵ�����Ϣ��ִ�� sqlite3_exec ֮����ִ��ʧ��ʱ���Բ�������ָ�루ֱ�� <span class="built_in">printf</span>(��%s\n��,errmsg)���õ�һ���ַ�����Ϣ���⴮��Ϣ����������ʲô�ط���</div><div class="line">sqlite3_exec����ͨ���޸��㴫����ָ����ָ �룬�����ṩ��ָ��ָ��������ʾ��Ϣ������sqlite3_exec���������Ϳ���ͨ������ <span class="keyword">char</span>*�õ�����������ʾ��</div><div class="line">˵����ͨ����sqlite3_callback ���������� <span class="keyword">void</span> * ������λ�ö������� NULL��</div><div class="line">��NULL��ʾ�㲻��Ҫ�ص󡣱������� insert �������� <span class="keyword">delete</span> ���󣬾�û�б�Ҫʹ�ûص󡣶������� select ʱ����Ҫʹ�ûص�����Ϊ sqlite3 �����ݲ���������ͨ���ص�������������ʲô���ݡ�</div></pre></td></tr></table></figure>

<p>��2��exec �Ļص�</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> (*sqlite3_callback)(<span class="keyword">void</span>*,<span class="keyword">int</span>,<span class="keyword">char</span>**, <span class="keyword">char</span>**);</div><div class="line">���Ļص��������붨���������������������͡����������򵥵����ӣ�</div><div class="line"><span class="comment">//sqlite3�Ļص�����</span></div><div class="line"><span class="comment">// sqlite ÿ�鵽һ����¼���͵���һ�������ص�</span></div><div class="line"><span class="keyword">int</span> LoadMyInfo( <span class="keyword">void</span> * para, <span class="keyword">int</span> n_column, <span class="keyword">char</span> ** column_value, <span class="keyword">char</span> ** column_name )</div><div class="line">{</div><div class="line"><span class="comment">//para������ sqlite3_exec �ﴫ���� void * ����</span></div><div class="line"><span class="comment">//ͨ��para�����������Դ���һЩ������ָ�루������ָ�롢�ṹָ�룩��Ȼ����������ǿ��ת���ɶ�Ӧ�����ͣ���������void*���ͣ�����ǿ��ת�����������Ͳſ��ã���Ȼ��������Щ����</span></div><div class="line"><span class="comment">//n_column����һ����¼�ж��ٸ��ֶ� (��������¼�ж�����)</span></div><div class="line"><span class="comment">// char ** column_value �Ǹ��ؼ�ֵ�������������ݶ������������ʵ�����Ǹ�1ά���飨��Ҫ��Ϊ��2ά���飩��ÿһ��Ԫ�ض���һ�� char * ֵ����һ���ֶ����ݣ����ַ�������ʾ����\0��β��</span></div><div class="line"></div><div class="line"><span class="comment">//char ** column_name �� column_value�Ƕ�Ӧ�ģ���ʾ�����ֶε��ֶ�����</span></div><div class="line"></div><div class="line"><span class="comment">//����Ҳ�ʹ�� para �������������Ĵ���.</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> i;</div><div class="line"></div><div class="line"><span class="built_in">printf</span>( ����¼���� %d ���ֶ�\n��, n_column );</div><div class="line"><span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; n_column; i ++ )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ���ֶ���:%s  ?&gt; �ֶ�ֵ:%s\n��,  column_name[i], column_value[i] );</div><div class="line">}</div><div class="line"><span class="built_in">printf</span>( ��������������\n�� );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span> ** )</div><div class="line">{</div><div class="line">sqlite3 * db;</div><div class="line"><span class="keyword">int</span> result;</div><div class="line"><span class="keyword">char</span> * errmsg = NULL;</div><div class="line"></div><div class="line">result = sqlite3_open( ��c:\\Dcg_database.db��, &db );</div><div class="line"><span class="keyword">if</span>( result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="comment">//���ݿ�����ʧ��</span></div><div class="line"><span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//���ݿ���������</span></div><div class="line"><span class="comment">//����һ�����Ա������� MyTable_1����2���ֶΣ� ID �� name������ID��һ���Զ����ӵ����ͣ��Ժ�insertʱ���Բ�ȥָ�������ֶΣ������Լ���0��ʼ����</span></div><div class="line">result = sqlite3_exec( db, ��create table MyTable_1( ID integer primary key autoincrement, name nvarchar(<span class="number">32</span>) )��, NULL, NULL, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//����һЩ��¼</span></div><div class="line">result = sqlite3_exec( db, ��insert into MyTable_1( name ) values ( ����·�� )��, <span class="number">0</span>, <span class="number">0</span>, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������¼ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line">result = sqlite3_exec( db, ��insert into MyTable_1( name ) values ( ���ﵥ���� )��, <span class="number">0</span>, <span class="number">0</span>, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������¼ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line">result = sqlite3_exec( db, ��insert into MyTable_1( name ) values ( ���������� )��, <span class="number">0</span>, <span class="number">0</span>, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������¼ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//��ʼ��ѯ���ݿ�</span></div><div class="line">result = sqlite3_exec( db, ��select * from MyTable_1��, LoadMyInfo, NULL, errmsg );</div><div class="line"></div><div class="line"><span class="comment">//�ر����ݿ�</span></div><div class="line">sqlite3_close( db );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>ͨ�����������ӣ�Ӧ�ÿ���֪�����δ���һ�����ݿ⣬���������ݿ�����������<br>����Щ֪ʶ�������Ͽ���Ӧ���ܶ����ݿ������ˡ�</p>
<h3 id="��3����ʹ�ûص���ѯ���ݿ�">��3����ʹ�ûص���ѯ���ݿ�</h3>
<p>�������ܵ� sqlite3_exec ��ʹ�ûص���ִ�� select ���󡣻���һ�򷽷�����ֱ�Ӳ�ѯ������Ҫ�ص���<br>���ǣ��Ҹ��˸о����ǻص��ã���Ϊ�������Ը������룬ֻ�����ûص����鷳����������һ�������������������� ������Ա�������㻹���ò����������� static ��<br>��Ҫ��Ϊʲô��������C++�����ˡ�C++��Ա����ʵ����������һ��������this��C++�������ĳ�Ա������ʱ������������ָ�뵱�ɺ����ĵ�һ������ ���ݽ�ȥ��<br>�����������ɸ�ǰ��˵�� sqlite �ص������Ĳ�����������ֻ�е��ѳ�Ա���������� static ʱ������û�ж�����������this��������<br>��Ȼ�ص��Եô������룬����ʱ���㻹����Ҫ�ǻص��� select ��ѯ��������ͨ�� sqlite3_get_table �����򵽡�<br>int sqlite3_get_table(sqlite3<em>, const char </em>sql, char <strong><em>resultp, int </em>nrow, int *ncolumn, char </strong>errmsg );<br>��1���������ٶ�˵����ǰ�������ӡ�<br>��2�������� sql ���䣬�� sqlite3_exec ���� sql ��һ���ġ���һ������ͨ����\0��β��char *�ַ�����<br>��3�������ǲ�ѯ����������Ȼһά���飨��Ҫ��Ϊ�Ƕ�ά���飬����Ҫ��Ϊ����ά���飩�����ڴ沼���ǣ���һ�����ֶ����ƣ������ǽ�������ÿ���ֶε�ֵ��������������˵�¡�<br>��4�������ǲ�ѯ����������¼�������������У���<br>��5�������Ƕ��ٸ��ֶΣ������У���<br>��6�������Ǵ�����Ϣ����ǰ��һ�������ﲻ��˵�ˡ�<br>����������������:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span> ** )</div><div class="line">{</div><div class="line">sqlite3 * db;</div><div class="line"><span class="keyword">int</span> result;</div><div class="line"><span class="keyword">char</span> * errmsg = NULL;</div><div class="line"><span class="keyword">char</span> **dbResult; <span class="comment">//�� char ** ���ͣ�����*��</span></div><div class="line"><span class="keyword">int</span> nRow, nColumn;</div><div class="line"><span class="keyword">int</span> i , j;</div><div class="line"><span class="keyword">int</span> index;</div><div class="line"></div><div class="line">result = sqlite3_open( ��c:\\Dcg_database.db��, &db );</div><div class="line"><span class="keyword">if</span>( result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="comment">//���ݿ�����ʧ��</span></div><div class="line"><span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//���ݿ���������</span></div><div class="line"><span class="comment">//����ǰ���Ѿ������� MyTable_1 ��</span></div><div class="line"><span class="comment">//��ʼ��ѯ�������� dbResult �Ѿ��� char **�������ּ���һ�� & ȡ��ַ�������ݽ�ȥ�ľͳ��� char ***</span></div><div class="line">result = sqlite3_get_table( db, ��select * from MyTable_1��, &dbResult, &nRow, &nColumn, &errmsg );</div><div class="line"><span class="keyword">if</span>( SQLITE_OK == result )</div><div class="line">{</div><div class="line"><span class="comment">//��ѯ�ɹ�</span></div><div class="line">index = nColumn; <span class="comment">//ǰ��˵�� dbResult ǰ����һ���������ֶ����ƣ��� nColumn ������ʼ��������������</span></div><div class="line"><span class="built_in">printf</span>( ���鵽%d����¼\n��, nRow );</div><div class="line"></div><div class="line"><span class="keyword">for</span>(  i = <span class="number">0</span>; i &lt; nRow ; i++ )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ���� %d ����¼\n��, i+<span class="number">1</span> );</div><div class="line"><span class="keyword">for</span>( j = <span class="number">0</span> ; j &lt; nColumn; j++ )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ���ֶ���:%s  ?&gt; �ֶ�ֵ:%s\n��,  dbResult[j], dbResult [index] );</div><div class="line">++index; <span class="comment">// dbResult ���ֶ�ֵ�������ģ��ӵ�0�������� nColumn �C 1���������ֶ����ƣ��ӵ� nColumn ������ʼ�����涼���ֶ�ֵ������һ����ά�ı���ͳ�����б�ʾ������һ����ƽ����ʽ����ʾ</span></div><div class="line">}</div><div class="line"><span class="built_in">printf</span>( ������-\n�� );</div><div class="line">}</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//������������ݿ���ѯ�Ƿ��ɹ������ͷ� char** ��ѯ������ʹ�� sqlite �ṩ�Ĺ������ͷ�</span></div><div class="line">sqlite3_free_table( dbResult );</div><div class="line"></div><div class="line"><span class="comment">//�ر����ݿ�</span></div><div class="line">sqlite3_close( db );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>����������Ϊֹ��sqlite3 �ĳ����÷����������ˡ�<br>�����ϵķ����������� sql ���䣬��ȫ����Ӧ�������������ݿ�������</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="һ���汾">һ���汾</h2>
<p>�� www.sqlite.org ��վ�����ص����µ� sqlite �����ͱ����汾����д������ʱ�����´����� 3.3.17 �汾��<br>�ܾ�û��ȥ���� sqlite �]]>
    </summary>
    
      <category term="��������" scheme="http://yoursite.com/categories/%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[windows����������]]></title>
    <link href="http://yoursite.com/2014/11/05/C%E8%AF%AD%E8%A8%80%E6%93%8D%E4%BD%9CSQLITE3%E6%95%B0%E6%8D%AE%E5%BA%931/"/>
    <id>http://yoursite.com/2014/11/05/C语言操作SQLITE3数据库1/</id>
    <published>2014-11-05T03:31:56.000Z</published>
    <updated>2014-11-05T03:31:57.000Z</updated>
    <content type="html"><![CDATA[<h2 id="һ���汾">һ���汾</h2>
<p>�� www.sqlite.org ��վ�����ص����µ� sqlite �����ͱ����汾����д������ʱ�����´����� 3.3.17 �汾��<br>�ܾ�û��ȥ���� sqlite �´��룬����Ҳ��֪�� sqlite �仯��ô������ǰ�ܶ��ļ�������ȫ���ϲ���һ�� sqlite3.c �ļ���<br>���������ô��ļ�����ͦ�õģ�ʡȥ����һ���ļ���������û����©������Ҳ����һ�����⣺���ļ�̫�󣬿��ӽ�7���д��룬VC�������������������� �ˡ�<br>��������Ҫ�������룬Ҳ�Ͳ���Ҫ���� sqlite3.c �ļ������󲻻��������ǣ�������Ҫдͨ���޸� sqlite �������ɼ��ܹ��ܣ���ʱ���ͱȽ�ʹ���ˡ�</p>
<h2 id="������������">������������</h2>
<p>����������˵�ˣ��� VC ���½� dos ����̨�հ׹��̣��� sqlite3.c �� sqlite3.h ���ӵ����̣����½�һ�� main.cpp �ļ���������д:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">extern</span> ��C��</div><div class="line">{</div><div class="line"><span class="preprocessor">#include ��./sqlite3.h��</span></div><div class="line">};</div><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span>** )</div><div class="line">{</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>ΪʲôҪ extern ��C�� ���������������⣬�Ҳ���˵̫�࣬����C++�Ļ�����Ҫ�� C++ ��ʹ��һ�� C �Ĵ��룬����Ҫ�� extern ��C�� ��������<br>C++�� C��Ȼ�﷨�����ص�������������������ͬ�Ķ������ڴ����Ĳ�������ȫ��ͬ�ģ���C++�������ﲻ��extern ��C������C���룬�ᵼ�±�������֪��������Ϊ C ���������ڴ沼�֡�<br>������ sqlite3.c ���˼��Ѿ������δ��붼 extern ��C�� �������ˣ�����������һ�� .c �ļ����Ծ�������һ�Σ�Ҳûʲô���á�<br>�������̾��������������ˡ����룬����ͨ����������һ�ѵ� warning�����Բ�������</p>
<h2 id="����SQLITE��������">����SQLITE��������</h2>
<p>sqlite�ṩ����һЩC�����ӿڣ�����������Щ�����������ݿ⡣ͨ��ʹ����Щ�ӿڣ�����һЩ��׼ sql ���䣨�� char * ���ͣ��� sqlite ������sqlite �ͻ�Ϊ���������ݿ⡣<br>sqlite ��MS��accessһ�����ļ������ݿ⣬����˵��һ�����ݿ�����һ���ļ��������ݿ������Խ����ܶ��ı����Խ����������������ȵȣ����ǣ���ʵ���ϵõ��ľ���һ���ļ���<br>���������ļ��ͱ������������ݿ⡣sqlite ����Ҫ�κ����ݿ����棬����ζ����������Ҫ sqlite ������һЩ�û����ݣ�����������Ҫ��װ���ݿ⡣<br>���濪ʼ�������ݿ�����������</p>
<h3 id="1_�������̣�1���ؼ����ݽṹ">1 �������̣�1���ؼ����ݽṹ</h3>
<p>sqlite ����õ�����sqlite3 <em> ���͡������ݿ��򿪿�ʼ��sqlite��ҪΪ��������׼�����ڴ棬ֱ�����ݿ��رգ��������̶���Ҫ�õ���������.<br>�����ݿ�����ʱ��ʼ���������͵ı����ʹ�������Ҫ���������ݿ⡣��������ϸ���ܡ�<br>��2���������ݿ�<br>int sqlite3_open( �ļ���, sqlite3 <em>* );<br>������������ʼ���ݿ�������<br>��Ҫ��������������һ�����ݿ��ļ��������磺c:\DongChunGuang_Database.db��<br>�ļ�������Ҫһ�����ڣ��������ļ������ڣ�sqlite ���Զ������������������ڣ��ͳ��԰��������ݿ��ļ����򿪡�<br>sqlite3 </em></em> ������ǰ���ᵽ�Ĺؼ����ݽṹ�������ṹ�ײ�ϸ�����Σ��㲻Ҫ������<br>��������ֵ��ʾ�����Ƿ���ȷ��������SQLITE_OK ����ʾ�������������صķ���ֵsqlite������һЩ�ꡣ������Щ���ĺ������Բο� sqlite3.h �ļ���<br>��������ϸ���壨˳��˵һ�£�sqlite3 �Ĵ���ע�����Գ��Ƿǳ��ߵģ�ʵ����Ҳ��ȷ�ܸߡ�ֻҪ���ῴӢ�ģ�sqlite ��������ѧ�����ٶ��󣩡�<br>�������ܹر����ݿ������ٸ�һ�βο����롣<br>��3���ر����ݿ�</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> sqlite3_close(sqlite3 *);</div><div class="line">ǰ�������� sqlite3_open ������һ�����ݿ⣬��βʱ��Ҫ���������������ر����ݿ⡣</div><div class="line">�������μ򵥵Ĵ��룺</div><div class="line"><span class="keyword">extern</span> ��C��</div><div class="line">{</div><div class="line"><span class="preprocessor">#include ��./sqlite3.h��</span></div><div class="line">};</div><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span>** )</div><div class="line">{</div><div class="line">sqlite3 * db = NULL; <span class="comment">//����sqlite�ؼ��ṹָ��</span></div><div class="line"><span class="keyword">int</span> result;</div><div class="line"></div><div class="line"><span class="comment">//�������ݿ�</span></div><div class="line"><span class="comment">//��Ҫ���� db ����ָ����ָ�룬��Ϊ sqlite3_open ����ҪΪ����ָ�������ڴ棬��Ҫ��dbָ��ָ�������ڴ���</span></div><div class="line">result = sqlite3_open( ��c:\\Dcg_database.db��, &db );</div><div class="line"><span class="keyword">if</span>( result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="comment">//���ݿ�����ʧ��</span></div><div class="line"><span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div><div class="line"><span class="comment">//���ݿ���������</span></div><div class="line"><span class="comment">//��</span></div><div class="line"></div><div class="line"><span class="comment">//���ݿ��򿪳ɹ�</span></div><div class="line"><span class="comment">//�ر����ݿ�</span></div><div class="line">sqlite3_close( db );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>������һ�����ݿ��������̡�</p>
<h3 id="2_SQL��������">2 SQL��������</h3>
<p>���ڽ���������sqlite ִ�б�׼ sql �﷨��</p>
<p>��1��ִ��sql����</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> sqlite3_exec(sqlite3*, <span class="keyword">const</span> <span class="keyword">char</span> *sql, sqlite3_callback, <span class="keyword">void</span> *,  <span class="keyword">char</span> **errmsg );</div><div class="line">������ִ��һ�� sql �����ĺ�����</div><div class="line">��<span class="number">1</span>����������˵�ˣ���ǰ��open�����õ���ָ�롣˵���ǹؼ����ݽṹ��</div><div class="line">��<span class="number">2</span>������<span class="keyword">const</span> <span class="keyword">char</span> *sql ��һ�� sql ���䣬��\<span class="number">0</span>��β��</div><div class="line">��<span class="number">3</span>������sqlite3_callback �ǻص󣬵���������ִ��֮����sqlite3��ȥ�������ṩ��������������ʲô�ǻص��������Լ��ұ�������ѧϰ��</div><div class="line">��<span class="number">4</span>������<span class="keyword">void</span> * �������ṩ��ָ�룬�����Դ����κ�һ��ָ����������������������ջᴫ���ص��������棬��������Ҫ����ָ�����ص�������������NULL��</div><div class="line">���������ٿ��ص�������д�����Լ�����������ʹ�á�</div><div class="line">�� <span class="number">5</span>������<span class="keyword">char</span> ** errmsg �Ǵ�����Ϣ��ע����ָ����ָ�롣</div><div class="line">sqlite3�����кܶ��̶��Ĵ�����Ϣ��ִ�� sqlite3_exec ֮����ִ��ʧ��ʱ���Բ�������ָ�루ֱ�� <span class="built_in">printf</span>(��%s\n��,errmsg)���õ�һ���ַ�����Ϣ���⴮��Ϣ����������ʲô�ط���</div><div class="line">sqlite3_exec����ͨ���޸��㴫����ָ����ָ �룬�����ṩ��ָ��ָ��������ʾ��Ϣ������sqlite3_exec���������Ϳ���ͨ������ <span class="keyword">char</span>*�õ�����������ʾ��</div><div class="line">˵����ͨ����sqlite3_callback ���������� <span class="keyword">void</span> * ������λ�ö������� NULL��</div><div class="line">��NULL��ʾ�㲻��Ҫ�ص󡣱������� insert �������� <span class="keyword">delete</span> ���󣬾�û�б�Ҫʹ�ûص󡣶������� select ʱ����Ҫʹ�ûص�����Ϊ sqlite3 �����ݲ���������ͨ���ص�������������ʲô���ݡ�</div></pre></td></tr></table></figure>

<p>��2��exec �Ļص�</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> (*sqlite3_callback)(<span class="keyword">void</span>*,<span class="keyword">int</span>,<span class="keyword">char</span>**, <span class="keyword">char</span>**);</div><div class="line">���Ļص��������붨���������������������͡����������򵥵����ӣ�</div><div class="line"><span class="comment">//sqlite3�Ļص�����</span></div><div class="line"><span class="comment">// sqlite ÿ�鵽һ����¼���͵���һ�������ص�</span></div><div class="line"><span class="keyword">int</span> LoadMyInfo( <span class="keyword">void</span> * para, <span class="keyword">int</span> n_column, <span class="keyword">char</span> ** column_value, <span class="keyword">char</span> ** column_name )</div><div class="line">{</div><div class="line"><span class="comment">//para������ sqlite3_exec �ﴫ���� void * ����</span></div><div class="line"><span class="comment">//ͨ��para�����������Դ���һЩ������ָ�루������ָ�롢�ṹָ�룩��Ȼ����������ǿ��ת���ɶ�Ӧ�����ͣ���������void*���ͣ�����ǿ��ת�����������Ͳſ��ã���Ȼ��������Щ����</span></div><div class="line"><span class="comment">//n_column����һ����¼�ж��ٸ��ֶ� (��������¼�ж�����)</span></div><div class="line"><span class="comment">// char ** column_value �Ǹ��ؼ�ֵ�������������ݶ������������ʵ�����Ǹ�1ά���飨��Ҫ��Ϊ��2ά���飩��ÿһ��Ԫ�ض���һ�� char * ֵ����һ���ֶ����ݣ����ַ�������ʾ����\0��β��</span></div><div class="line"></div><div class="line"><span class="comment">//char ** column_name �� column_value�Ƕ�Ӧ�ģ���ʾ�����ֶε��ֶ�����</span></div><div class="line"></div><div class="line"><span class="comment">//����Ҳ�ʹ�� para �������������Ĵ���.</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> i;</div><div class="line"></div><div class="line"><span class="built_in">printf</span>( ����¼���� %d ���ֶ�\n��, n_column );</div><div class="line"><span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; n_column; i ++ )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ���ֶ���:%s  ?&gt; �ֶ�ֵ:%s\n��,  column_name[i], column_value[i] );</div><div class="line">}</div><div class="line"><span class="built_in">printf</span>( ��������������\n�� );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span> ** )</div><div class="line">{</div><div class="line">sqlite3 * db;</div><div class="line"><span class="keyword">int</span> result;</div><div class="line"><span class="keyword">char</span> * errmsg = NULL;</div><div class="line"></div><div class="line">result = sqlite3_open( ��c:\\Dcg_database.db��, &db );</div><div class="line"><span class="keyword">if</span>( result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="comment">//���ݿ�����ʧ��</span></div><div class="line"><span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//���ݿ���������</span></div><div class="line"><span class="comment">//����һ�����Ա������� MyTable_1����2���ֶΣ� ID �� name������ID��һ���Զ����ӵ����ͣ��Ժ�insertʱ���Բ�ȥָ�������ֶΣ������Լ���0��ʼ����</span></div><div class="line">result = sqlite3_exec( db, ��create table MyTable_1( ID integer primary key autoincrement, name nvarchar(<span class="number">32</span>) )��, NULL, NULL, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//����һЩ��¼</span></div><div class="line">result = sqlite3_exec( db, ��insert into MyTable_1( name ) values ( ����·�� )��, <span class="number">0</span>, <span class="number">0</span>, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������¼ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line">result = sqlite3_exec( db, ��insert into MyTable_1( name ) values ( ���ﵥ���� )��, <span class="number">0</span>, <span class="number">0</span>, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������¼ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line">result = sqlite3_exec( db, ��insert into MyTable_1( name ) values ( ���������� )��, <span class="number">0</span>, <span class="number">0</span>, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������¼ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//��ʼ��ѯ���ݿ�</span></div><div class="line">result = sqlite3_exec( db, ��select * from MyTable_1��, LoadMyInfo, NULL, errmsg );</div><div class="line"></div><div class="line"><span class="comment">//�ر����ݿ�</span></div><div class="line">sqlite3_close( db );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>ͨ�����������ӣ�Ӧ�ÿ���֪�����δ���һ�����ݿ⣬���������ݿ�����������<br>����Щ֪ʶ�������Ͽ���Ӧ���ܶ����ݿ������ˡ�</p>
<h3 id="��3����ʹ�ûص���ѯ���ݿ�">��3����ʹ�ûص���ѯ���ݿ�</h3>
<p>�������ܵ� sqlite3_exec ��ʹ�ûص���ִ�� select ���󡣻���һ�򷽷�����ֱ�Ӳ�ѯ������Ҫ�ص���<br>���ǣ��Ҹ��˸о����ǻص��ã���Ϊ�������Ը������룬ֻ�����ûص����鷳����������һ�������������������� ������Ա�������㻹���ò����������� static ��<br>��Ҫ��Ϊʲô��������C++�����ˡ�C++��Ա����ʵ����������һ��������this��C++�������ĳ�Ա������ʱ������������ָ�뵱�ɺ����ĵ�һ������ ���ݽ�ȥ��<br>�����������ɸ�ǰ��˵�� sqlite �ص������Ĳ�����������ֻ�е��ѳ�Ա���������� static ʱ������û�ж�����������this��������<br>��Ȼ�ص��Եô������룬����ʱ���㻹����Ҫ�ǻص��� select ��ѯ��������ͨ�� sqlite3_get_table �����򵽡�<br>int sqlite3_get_table(sqlite3<em>, const char </em>sql, char <strong><em>resultp, int </em>nrow, int *ncolumn, char </strong>errmsg );<br>��1���������ٶ�˵����ǰ�������ӡ�<br>��2�������� sql ���䣬�� sqlite3_exec ���� sql ��һ���ġ���һ������ͨ����\0��β��char *�ַ�����<br>��3�������ǲ�ѯ����������Ȼһά���飨��Ҫ��Ϊ�Ƕ�ά���飬����Ҫ��Ϊ����ά���飩�����ڴ沼���ǣ���һ�����ֶ����ƣ������ǽ�������ÿ���ֶε�ֵ��������������˵�¡�<br>��4�������ǲ�ѯ����������¼�������������У���<br>��5�������Ƕ��ٸ��ֶΣ������У���<br>��6�������Ǵ�����Ϣ����ǰ��һ�������ﲻ��˵�ˡ�<br>����������������:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span> ** )</div><div class="line">{</div><div class="line">sqlite3 * db;</div><div class="line"><span class="keyword">int</span> result;</div><div class="line"><span class="keyword">char</span> * errmsg = NULL;</div><div class="line"><span class="keyword">char</span> **dbResult; <span class="comment">//�� char ** ���ͣ�����*��</span></div><div class="line"><span class="keyword">int</span> nRow, nColumn;</div><div class="line"><span class="keyword">int</span> i , j;</div><div class="line"><span class="keyword">int</span> index;</div><div class="line"></div><div class="line">result = sqlite3_open( ��c:\\Dcg_database.db��, &db );</div><div class="line"><span class="keyword">if</span>( result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="comment">//���ݿ�����ʧ��</span></div><div class="line"><span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//���ݿ���������</span></div><div class="line"><span class="comment">//����ǰ���Ѿ������� MyTable_1 ��</span></div><div class="line"><span class="comment">//��ʼ��ѯ�������� dbResult �Ѿ��� char **�������ּ���һ�� & ȡ��ַ�������ݽ�ȥ�ľͳ��� char ***</span></div><div class="line">result = sqlite3_get_table( db, ��select * from MyTable_1��, &dbResult, &nRow, &nColumn, &errmsg );</div><div class="line"><span class="keyword">if</span>( SQLITE_OK == result )</div><div class="line">{</div><div class="line"><span class="comment">//��ѯ�ɹ�</span></div><div class="line">index = nColumn; <span class="comment">//ǰ��˵�� dbResult ǰ����һ���������ֶ����ƣ��� nColumn ������ʼ��������������</span></div><div class="line"><span class="built_in">printf</span>( ���鵽%d����¼\n��, nRow );</div><div class="line"></div><div class="line"><span class="keyword">for</span>(  i = <span class="number">0</span>; i &lt; nRow ; i++ )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ���� %d ����¼\n��, i+<span class="number">1</span> );</div><div class="line"><span class="keyword">for</span>( j = <span class="number">0</span> ; j &lt; nColumn; j++ )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ���ֶ���:%s  ?&gt; �ֶ�ֵ:%s\n��,  dbResult[j], dbResult [index] );</div><div class="line">++index; <span class="comment">// dbResult ���ֶ�ֵ�������ģ��ӵ�0�������� nColumn �C 1���������ֶ����ƣ��ӵ� nColumn ������ʼ�����涼���ֶ�ֵ������һ����ά�ı���ͳ�����б�ʾ������һ����ƽ����ʽ����ʾ</span></div><div class="line">}</div><div class="line"><span class="built_in">printf</span>( ������-\n�� );</div><div class="line">}</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//������������ݿ���ѯ�Ƿ��ɹ������ͷ� char** ��ѯ������ʹ�� sqlite �ṩ�Ĺ������ͷ�</span></div><div class="line">sqlite3_free_table( dbResult );</div><div class="line"></div><div class="line"><span class="comment">//�ر����ݿ�</span></div><div class="line">sqlite3_close( db );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>����������Ϊֹ��sqlite3 �ĳ����÷����������ˡ�<br>�����ϵķ����������� sql ���䣬��ȫ����Ӧ�������������ݿ�������</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="һ���汾">һ���汾</h2>
<p>�� www.sqlite.org ��վ�����ص����µ� sqlite �����ͱ����汾����д������ʱ�����´����� 3.3.17 �汾��<br>�ܾ�û��ȥ���� sqlite �]]>
    </summary>
    
      <category term="��������" scheme="http://yoursite.com/categories/%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[windows����������]]></title>
    <link href="http://yoursite.com/2014/11/05/C%E8%AF%AD%E8%A8%80%E6%93%8D%E4%BD%9CSQLITE3%E6%95%B0%E6%8D%AE%E5%BA%931/"/>
    <id>http://yoursite.com/2014/11/05/C语言操作SQLITE3数据库1/</id>
    <published>2014-11-05T03:31:56.000Z</published>
    <updated>2014-11-05T03:31:57.000Z</updated>
    <content type="html"><![CDATA[<h2 id="һ���汾">һ���汾</h2>
<p>�� www.sqlite.org ��վ�����ص����µ� sqlite �����ͱ����汾����д������ʱ�����´����� 3.3.17 �汾��<br>�ܾ�û��ȥ���� sqlite �´��룬����Ҳ��֪�� sqlite �仯��ô������ǰ�ܶ��ļ�������ȫ���ϲ���һ�� sqlite3.c �ļ���<br>���������ô��ļ�����ͦ�õģ�ʡȥ����һ���ļ���������û����©������Ҳ����һ�����⣺���ļ�̫�󣬿��ӽ�7���д��룬VC�������������������� �ˡ�<br>��������Ҫ�������룬Ҳ�Ͳ���Ҫ���� sqlite3.c �ļ������󲻻��������ǣ�������Ҫдͨ���޸� sqlite �������ɼ��ܹ��ܣ���ʱ���ͱȽ�ʹ���ˡ�</p>
<h2 id="������������">������������</h2>
<p>����������˵�ˣ��� VC ���½� dos ����̨�հ׹��̣��� sqlite3.c �� sqlite3.h ���ӵ����̣����½�һ�� main.cpp �ļ���������д:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">extern</span> ��C��</div><div class="line">{</div><div class="line"><span class="preprocessor">#include ��./sqlite3.h��</span></div><div class="line">};</div><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span>** )</div><div class="line">{</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>ΪʲôҪ extern ��C�� ���������������⣬�Ҳ���˵̫�࣬����C++�Ļ�����Ҫ�� C++ ��ʹ��һ�� C �Ĵ��룬����Ҫ�� extern ��C�� ��������<br>C++�� C��Ȼ�﷨�����ص�������������������ͬ�Ķ������ڴ����Ĳ�������ȫ��ͬ�ģ���C++�������ﲻ��extern ��C������C���룬�ᵼ�±�������֪��������Ϊ C ���������ڴ沼�֡�<br>������ sqlite3.c ���˼��Ѿ������δ��붼 extern ��C�� �������ˣ�����������һ�� .c �ļ����Ծ�������һ�Σ�Ҳûʲô���á�<br>�������̾��������������ˡ����룬����ͨ����������һ�ѵ� warning�����Բ�������</p>
<h2 id="����SQLITE��������">����SQLITE��������</h2>
<p>sqlite�ṩ����һЩC�����ӿڣ�����������Щ�����������ݿ⡣ͨ��ʹ����Щ�ӿڣ�����һЩ��׼ sql ���䣨�� char * ���ͣ��� sqlite ������sqlite �ͻ�Ϊ���������ݿ⡣<br>sqlite ��MS��accessһ�����ļ������ݿ⣬����˵��һ�����ݿ�����һ���ļ��������ݿ������Խ����ܶ��ı����Խ����������������ȵȣ����ǣ���ʵ���ϵõ��ľ���һ���ļ���<br>���������ļ��ͱ������������ݿ⡣sqlite ����Ҫ�κ����ݿ����棬����ζ����������Ҫ sqlite ������һЩ�û����ݣ�����������Ҫ��װ���ݿ⡣<br>���濪ʼ�������ݿ�����������</p>
<h3 id="1_�������̣�1���ؼ����ݽṹ">1 �������̣�1���ؼ����ݽṹ</h3>
<p>sqlite ����õ�����sqlite3 <em> ���͡������ݿ��򿪿�ʼ��sqlite��ҪΪ��������׼�����ڴ棬ֱ�����ݿ��رգ��������̶���Ҫ�õ���������.<br>�����ݿ�����ʱ��ʼ���������͵ı����ʹ�������Ҫ���������ݿ⡣��������ϸ���ܡ�<br>��2���������ݿ�<br>int sqlite3_open( �ļ���, sqlite3 <em>* );<br>������������ʼ���ݿ�������<br>��Ҫ��������������һ�����ݿ��ļ��������磺c:\DongChunGuang_Database.db��<br>�ļ�������Ҫһ�����ڣ��������ļ������ڣ�sqlite ���Զ������������������ڣ��ͳ��԰��������ݿ��ļ����򿪡�<br>sqlite3 </em></em> ������ǰ���ᵽ�Ĺؼ����ݽṹ�������ṹ�ײ�ϸ�����Σ��㲻Ҫ������<br>��������ֵ��ʾ�����Ƿ���ȷ��������SQLITE_OK ����ʾ�������������صķ���ֵsqlite������һЩ�ꡣ������Щ���ĺ������Բο� sqlite3.h �ļ���<br>��������ϸ���壨˳��˵һ�£�sqlite3 �Ĵ���ע�����Գ��Ƿǳ��ߵģ�ʵ����Ҳ��ȷ�ܸߡ�ֻҪ���ῴӢ�ģ�sqlite ��������ѧ�����ٶ��󣩡�<br>�������ܹر����ݿ������ٸ�һ�βο����롣<br>��3���ر����ݿ�</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> sqlite3_close(sqlite3 *);</div><div class="line">ǰ�������� sqlite3_open ������һ�����ݿ⣬��βʱ��Ҫ���������������ر����ݿ⡣</div><div class="line">�������μ򵥵Ĵ��룺</div><div class="line"><span class="keyword">extern</span> ��C��</div><div class="line">{</div><div class="line"><span class="preprocessor">#include ��./sqlite3.h��</span></div><div class="line">};</div><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span>** )</div><div class="line">{</div><div class="line">sqlite3 * db = NULL; <span class="comment">//����sqlite�ؼ��ṹָ��</span></div><div class="line"><span class="keyword">int</span> result;</div><div class="line"></div><div class="line"><span class="comment">//�������ݿ�</span></div><div class="line"><span class="comment">//��Ҫ���� db ����ָ����ָ�룬��Ϊ sqlite3_open ����ҪΪ����ָ�������ڴ棬��Ҫ��dbָ��ָ�������ڴ���</span></div><div class="line">result = sqlite3_open( ��c:\\Dcg_database.db��, &db );</div><div class="line"><span class="keyword">if</span>( result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="comment">//���ݿ�����ʧ��</span></div><div class="line"><span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div><div class="line"><span class="comment">//���ݿ���������</span></div><div class="line"><span class="comment">//��</span></div><div class="line"></div><div class="line"><span class="comment">//���ݿ��򿪳ɹ�</span></div><div class="line"><span class="comment">//�ر����ݿ�</span></div><div class="line">sqlite3_close( db );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>������һ�����ݿ��������̡�</p>
<h3 id="2_SQL��������">2 SQL��������</h3>
<p>���ڽ���������sqlite ִ�б�׼ sql �﷨��</p>
<p>��1��ִ��sql����</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> sqlite3_exec(sqlite3*, <span class="keyword">const</span> <span class="keyword">char</span> *sql, sqlite3_callback, <span class="keyword">void</span> *,  <span class="keyword">char</span> **errmsg );</div><div class="line">������ִ��һ�� sql �����ĺ�����</div><div class="line">��<span class="number">1</span>����������˵�ˣ���ǰ��open�����õ���ָ�롣˵���ǹؼ����ݽṹ��</div><div class="line">��<span class="number">2</span>������<span class="keyword">const</span> <span class="keyword">char</span> *sql ��һ�� sql ���䣬��\<span class="number">0</span>��β��</div><div class="line">��<span class="number">3</span>������sqlite3_callback �ǻص󣬵���������ִ��֮����sqlite3��ȥ�������ṩ��������������ʲô�ǻص��������Լ��ұ�������ѧϰ��</div><div class="line">��<span class="number">4</span>������<span class="keyword">void</span> * �������ṩ��ָ�룬�����Դ����κ�һ��ָ����������������������ջᴫ���ص��������棬��������Ҫ����ָ�����ص�������������NULL��</div><div class="line">���������ٿ��ص�������д�����Լ�����������ʹ�á�</div><div class="line">�� <span class="number">5</span>������<span class="keyword">char</span> ** errmsg �Ǵ�����Ϣ��ע����ָ����ָ�롣</div><div class="line">sqlite3�����кܶ��̶��Ĵ�����Ϣ��ִ�� sqlite3_exec ֮����ִ��ʧ��ʱ���Բ�������ָ�루ֱ�� <span class="built_in">printf</span>(��%s\n��,errmsg)���õ�һ���ַ�����Ϣ���⴮��Ϣ����������ʲô�ط���</div><div class="line">sqlite3_exec����ͨ���޸��㴫����ָ����ָ �룬�����ṩ��ָ��ָ��������ʾ��Ϣ������sqlite3_exec���������Ϳ���ͨ������ <span class="keyword">char</span>*�õ�����������ʾ��</div><div class="line">˵����ͨ����sqlite3_callback ���������� <span class="keyword">void</span> * ������λ�ö������� NULL��</div><div class="line">��NULL��ʾ�㲻��Ҫ�ص󡣱������� insert �������� <span class="keyword">delete</span> ���󣬾�û�б�Ҫʹ�ûص󡣶������� select ʱ����Ҫʹ�ûص�����Ϊ sqlite3 �����ݲ���������ͨ���ص�������������ʲô���ݡ�</div></pre></td></tr></table></figure>

<p>��2��exec �Ļص�</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> (*sqlite3_callback)(<span class="keyword">void</span>*,<span class="keyword">int</span>,<span class="keyword">char</span>**, <span class="keyword">char</span>**);</div><div class="line">���Ļص��������붨���������������������͡����������򵥵����ӣ�</div><div class="line"><span class="comment">//sqlite3�Ļص�����</span></div><div class="line"><span class="comment">// sqlite ÿ�鵽һ����¼���͵���һ�������ص�</span></div><div class="line"><span class="keyword">int</span> LoadMyInfo( <span class="keyword">void</span> * para, <span class="keyword">int</span> n_column, <span class="keyword">char</span> ** column_value, <span class="keyword">char</span> ** column_name )</div><div class="line">{</div><div class="line"><span class="comment">//para������ sqlite3_exec �ﴫ���� void * ����</span></div><div class="line"><span class="comment">//ͨ��para�����������Դ���һЩ������ָ�루������ָ�롢�ṹָ�룩��Ȼ����������ǿ��ת���ɶ�Ӧ�����ͣ���������void*���ͣ�����ǿ��ת�����������Ͳſ��ã���Ȼ��������Щ����</span></div><div class="line"><span class="comment">//n_column����һ����¼�ж��ٸ��ֶ� (��������¼�ж�����)</span></div><div class="line"><span class="comment">// char ** column_value �Ǹ��ؼ�ֵ�������������ݶ������������ʵ�����Ǹ�1ά���飨��Ҫ��Ϊ��2ά���飩��ÿһ��Ԫ�ض���һ�� char * ֵ����һ���ֶ����ݣ����ַ�������ʾ����\0��β��</span></div><div class="line"></div><div class="line"><span class="comment">//char ** column_name �� column_value�Ƕ�Ӧ�ģ���ʾ�����ֶε��ֶ�����</span></div><div class="line"></div><div class="line"><span class="comment">//����Ҳ�ʹ�� para �������������Ĵ���.</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> i;</div><div class="line"></div><div class="line"><span class="built_in">printf</span>( ����¼���� %d ���ֶ�\n��, n_column );</div><div class="line"><span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; n_column; i ++ )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ���ֶ���:%s  ?&gt; �ֶ�ֵ:%s\n��,  column_name[i], column_value[i] );</div><div class="line">}</div><div class="line"><span class="built_in">printf</span>( ��������������\n�� );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span> ** )</div><div class="line">{</div><div class="line">sqlite3 * db;</div><div class="line"><span class="keyword">int</span> result;</div><div class="line"><span class="keyword">char</span> * errmsg = NULL;</div><div class="line"></div><div class="line">result = sqlite3_open( ��c:\\Dcg_database.db��, &db );</div><div class="line"><span class="keyword">if</span>( result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="comment">//���ݿ�����ʧ��</span></div><div class="line"><span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//���ݿ���������</span></div><div class="line"><span class="comment">//����һ�����Ա������� MyTable_1����2���ֶΣ� ID �� name������ID��һ���Զ����ӵ����ͣ��Ժ�insertʱ���Բ�ȥָ�������ֶΣ������Լ���0��ʼ����</span></div><div class="line">result = sqlite3_exec( db, ��create table MyTable_1( ID integer primary key autoincrement, name nvarchar(<span class="number">32</span>) )��, NULL, NULL, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//����һЩ��¼</span></div><div class="line">result = sqlite3_exec( db, ��insert into MyTable_1( name ) values ( ����·�� )��, <span class="number">0</span>, <span class="number">0</span>, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������¼ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line">result = sqlite3_exec( db, ��insert into MyTable_1( name ) values ( ���ﵥ���� )��, <span class="number">0</span>, <span class="number">0</span>, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������¼ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line">result = sqlite3_exec( db, ��insert into MyTable_1( name ) values ( ���������� )��, <span class="number">0</span>, <span class="number">0</span>, errmsg );</div><div class="line"><span class="keyword">if</span>(result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ��������¼ʧ�ܣ�������:%d������ԭ��:%s\n��, result, errmsg );</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//��ʼ��ѯ���ݿ�</span></div><div class="line">result = sqlite3_exec( db, ��select * from MyTable_1��, LoadMyInfo, NULL, errmsg );</div><div class="line"></div><div class="line"><span class="comment">//�ر����ݿ�</span></div><div class="line">sqlite3_close( db );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>ͨ�����������ӣ�Ӧ�ÿ���֪�����δ���һ�����ݿ⣬���������ݿ�����������<br>����Щ֪ʶ�������Ͽ���Ӧ���ܶ����ݿ������ˡ�</p>
<h3 id="��3����ʹ�ûص���ѯ���ݿ�">��3����ʹ�ûص���ѯ���ݿ�</h3>
<p>�������ܵ� sqlite3_exec ��ʹ�ûص���ִ�� select ���󡣻���һ�򷽷�����ֱ�Ӳ�ѯ������Ҫ�ص���<br>���ǣ��Ҹ��˸о����ǻص��ã���Ϊ�������Ը������룬ֻ�����ûص����鷳����������һ�������������������� ������Ա�������㻹���ò����������� static ��<br>��Ҫ��Ϊʲô��������C++�����ˡ�C++��Ա����ʵ����������һ��������this��C++�������ĳ�Ա������ʱ������������ָ�뵱�ɺ����ĵ�һ������ ���ݽ�ȥ��<br>�����������ɸ�ǰ��˵�� sqlite �ص������Ĳ�����������ֻ�е��ѳ�Ա���������� static ʱ������û�ж�����������this��������<br>��Ȼ�ص��Եô������룬����ʱ���㻹����Ҫ�ǻص��� select ��ѯ��������ͨ�� sqlite3_get_table �����򵽡�<br>int sqlite3_get_table(sqlite3<em>, const char </em>sql, char <strong><em>resultp, int </em>nrow, int *ncolumn, char </strong>errmsg );<br>��1���������ٶ�˵����ǰ�������ӡ�<br>��2�������� sql ���䣬�� sqlite3_exec ���� sql ��һ���ġ���һ������ͨ����\0��β��char *�ַ�����<br>��3�������ǲ�ѯ����������Ȼһά���飨��Ҫ��Ϊ�Ƕ�ά���飬����Ҫ��Ϊ����ά���飩�����ڴ沼���ǣ���һ�����ֶ����ƣ������ǽ�������ÿ���ֶε�ֵ��������������˵�¡�<br>��4�������ǲ�ѯ����������¼�������������У���<br>��5�������Ƕ��ٸ��ֶΣ������У���<br>��6�������Ǵ�����Ϣ����ǰ��һ�������ﲻ��˵�ˡ�<br>����������������:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> main( <span class="keyword">int</span> , <span class="keyword">char</span> ** )</div><div class="line">{</div><div class="line">sqlite3 * db;</div><div class="line"><span class="keyword">int</span> result;</div><div class="line"><span class="keyword">char</span> * errmsg = NULL;</div><div class="line"><span class="keyword">char</span> **dbResult; <span class="comment">//�� char ** ���ͣ�����*��</span></div><div class="line"><span class="keyword">int</span> nRow, nColumn;</div><div class="line"><span class="keyword">int</span> i , j;</div><div class="line"><span class="keyword">int</span> index;</div><div class="line"></div><div class="line">result = sqlite3_open( ��c:\\Dcg_database.db��, &db );</div><div class="line"><span class="keyword">if</span>( result != SQLITE_OK )</div><div class="line">{</div><div class="line"><span class="comment">//���ݿ�����ʧ��</span></div><div class="line"><span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//���ݿ���������</span></div><div class="line"><span class="comment">//����ǰ���Ѿ������� MyTable_1 ��</span></div><div class="line"><span class="comment">//��ʼ��ѯ�������� dbResult �Ѿ��� char **�������ּ���һ�� & ȡ��ַ�������ݽ�ȥ�ľͳ��� char ***</span></div><div class="line">result = sqlite3_get_table( db, ��select * from MyTable_1��, &dbResult, &nRow, &nColumn, &errmsg );</div><div class="line"><span class="keyword">if</span>( SQLITE_OK == result )</div><div class="line">{</div><div class="line"><span class="comment">//��ѯ�ɹ�</span></div><div class="line">index = nColumn; <span class="comment">//ǰ��˵�� dbResult ǰ����һ���������ֶ����ƣ��� nColumn ������ʼ��������������</span></div><div class="line"><span class="built_in">printf</span>( ���鵽%d����¼\n��, nRow );</div><div class="line"></div><div class="line"><span class="keyword">for</span>(  i = <span class="number">0</span>; i &lt; nRow ; i++ )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ���� %d ����¼\n��, i+<span class="number">1</span> );</div><div class="line"><span class="keyword">for</span>( j = <span class="number">0</span> ; j &lt; nColumn; j++ )</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>( ���ֶ���:%s  ?&gt; �ֶ�ֵ:%s\n��,  dbResult[j], dbResult [index] );</div><div class="line">++index; <span class="comment">// dbResult ���ֶ�ֵ�������ģ��ӵ�0�������� nColumn �C 1���������ֶ����ƣ��ӵ� nColumn ������ʼ�����涼���ֶ�ֵ������һ����ά�ı���ͳ�����б�ʾ������һ����ƽ����ʽ����ʾ</span></div><div class="line">}</div><div class="line"><span class="built_in">printf</span>( ������-\n�� );</div><div class="line">}</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//������������ݿ���ѯ�Ƿ��ɹ������ͷ� char** ��ѯ������ʹ�� sqlite �ṩ�Ĺ������ͷ�</span></div><div class="line">sqlite3_free_table( dbResult );</div><div class="line"></div><div class="line"><span class="comment">//�ر����ݿ�</span></div><div class="line">sqlite3_close( db );</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>����������Ϊֹ��sqlite3 �ĳ����÷����������ˡ�<br>�����ϵķ����������� sql ���䣬��ȫ����Ӧ�������������ݿ�������</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="һ���汾">һ���汾</h2>
<p>�� www.sqlite.org ��վ�����ص����µ� sqlite �����ͱ����汾����д������ʱ�����´����� 3.3.17 �汾��<br>�ܾ�û��ȥ���� sqlite �]]>
    </summary>
    
      <category term="��������" scheme="http://yoursite.com/categories/%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[windows常见反调试]]></title>
    <link href="http://yoursite.com/2014/10/31/windows%E5%B8%B8%E8%A7%81%E5%8F%8D%E8%B0%83%E8%AF%95/"/>
    <id>http://yoursite.com/2014/10/31/windows常见反调试/</id>
    <published>2014-10-31T07:17:40.000Z</published>
    <updated>2014-10-31T12:46:28.000Z</updated>
    <content type="html"><![CDATA[<h2 id="1-_PEB">1. <strong>PEB</strong></h2>
<p>0×002    BeingDebugged<br>正常运行：0×0        调试态：0×1<br>0x00c    Ldr：指向堆内存区地址<br>调试状态堆内存全部填充为0xFEEEFEEE<br>0×018    ProcessHeap：指向HEAP结构体<br>0x00c    Flags    正常运行：0×2    调试态：0×50000062<br>0×010    ForceFlags    正常运行：0×2    调试态：0×40000060<br>0×068    NtGlobalFlag<br>正常运行：0×0        调试态：0×70<br>代码示例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#include </span></div><div class="line"><span class="preprocessor">#include</span></div><div class="line"><span class="keyword">extern</span> “C” BOOL WINAPI IsDebuggerPresent(VOID);</div><div class="line"><span class="keyword">int</span> main()</div><div class="line">{</div><div class="line">FARPROC pProc = NULL;</div><div class="line">LPBYTE pTeb = NULL;</div><div class="line">LPBYTE pPeb = NULL;</div><div class="line">LPBYTE pLdr = NULL;</div><div class="line">LPBYTE pHeap = NULL;</div><div class="line">DWORD dst[<span class="number">4</span>] = {<span class="number">0xEEFEEEFE</span>, <span class="number">0xEEFEEEFE</span>, <span class="number">0xEEFEEEFE</span>, <span class="number">0xEEFEEEFE</span>};</div><div class="line"><span class="comment">//BeingDebugged</span></div><div class="line"><span class="built_in">printf</span>(“BeingDebugged———\n”);</div><div class="line"><span class="keyword">if</span> (IsDebuggerPresent())</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“Debugger Detected!\n”);</div><div class="line">}</div><div class="line"><span class="keyword">else</span></div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“No Debugger!\n”);</div><div class="line">}</div><div class="line"><span class="comment">//Ldr</span></div><div class="line"><span class="built_in">printf</span>(“\nLdr———\n”);</div><div class="line">pProc = GetProcAddress(GetModuleHandle(“ntdll.dll”), “NtCurrentTeb”);</div><div class="line">pTeb = (LPBYTE)(*pProc)();</div><div class="line">pPeb = (LPBYTE)*(LPDWORD)(pTeb + <span class="number">0</span>×<span class="number">30</span>);</div><div class="line">pLdr = (LPBYTE)*(LPDWORD)(pPeb + <span class="number">0xc</span>);</div><div class="line">__try</div><div class="line">{</div><div class="line"><span class="keyword">while</span> (<span class="number">1</span>)</div><div class="line">{</div><div class="line"><span class="keyword">if</span> (!<span class="built_in">memcmp</span>(dst, pLdr, <span class="keyword">sizeof</span>(dst)))</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“Debugger Detected!\n”);</div><div class="line"><span class="keyword">break</span>;</div><div class="line">}</div><div class="line">pLdr++;</div><div class="line">}</div><div class="line">}</div><div class="line">__except (EXCEPTION_EXECUTE_HANDLER)</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“No Debugger!\n”);</div><div class="line">}</div><div class="line"><span class="comment">//ProcessHeap</span></div><div class="line"><span class="built_in">printf</span>(“\nProcessHeap———\n”);</div><div class="line">pHeap = (LPBYTE)*(LPDWORD)(pPeb + <span class="number">0</span>×<span class="number">18</span>);</div><div class="line"><span class="keyword">if</span> (*(LPDWORD)(pHeap + <span class="number">0x0c</span>) == <span class="number">0</span>×<span class="number">50000062</span> || *(LPDWORD)(pHeap + <span class="number">0</span>×<span class="number">10</span>) == <span class="number">0</span>×<span class="number">40000060</span>)</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“Debugger Detected!\n”);</div><div class="line">}</div><div class="line"><span class="keyword">else</span></div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“No Debugger!\n”);</div><div class="line">}</div><div class="line"><span class="comment">//NtGlobalFlag</span></div><div class="line"><span class="built_in">printf</span>(“\nNtGlobalFlag———\n”);</div><div class="line"><span class="keyword">if</span> (*(LPDWORD)(pPeb + <span class="number">0</span>×<span class="number">68</span>) == <span class="number">0</span>×<span class="number">70</span>)</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“Debugger Detected!\n”);</div><div class="line">}</div><div class="line"><span class="keyword">else</span></div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“No Debugger!\n”);</div><div class="line">}</div><div class="line"><span class="built_in">printf</span>(“\n\n”);</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="2-_NtQueryInformationProcess">2. <strong>NtQueryInformationProcess</strong></h2>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">NTSYSAPI NTSTATUS NTAPI NtQueryInformationProcess (</div><div class="line">HANDLE     ProcessHandle, 　　　　　　<span class="comment">// 进程句柄</span></div><div class="line">PROCESSINFOCLASS 　　InformationClass, <span class="comment">// 信息类型</span></div><div class="line">PVOID 　　　　　ProcessInformation, 　　　 <span class="comment">// 缓冲指针</span></div><div class="line">ULONG 　　　　ProcessInformationLength, <span class="comment">// 以字节为单位的缓冲大小</span></div><div class="line">PULONG 　　　ReturnLength OPTIONAL     <span class="comment">// 写入缓冲的字节数</span></div><div class="line">);</div></pre></td></tr></table></figure>

<p>第二个枚举参数中的三个域可以用来做反调试<br>ProcessDebugPort = 0×7<br>正常运行：0×0        调试态：0xFFFFFFFF<br>ProcessDebugObjectHandle = 0x1E<br>正常运行：NULL        调试态：调试对象句柄<br>ProcessDebugFlags = 0x1F<br>正常运行：0×1        调试态：0×0<br>代码示例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">proc = (NTQUERYINFORMATIONPROCESS)GetProcAddress(GetModuleHandle(“ntdll.dll”), “NtQueryInformationProcess”);</div><div class="line"><span class="comment">//ProcessDebugPort = 0×7</span></div><div class="line">(*proc)(GetCurrentProcess(), ProcessDebugPort, &dwRet, <span class="keyword">sizeof</span>(dwRet), NULL);</div><div class="line"><span class="keyword">if</span> (dwRet != <span class="number">0</span>)</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“Debugger Detected!\n”);</div><div class="line">}</div><div class="line"><span class="keyword">else</span></div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“No Debugger!\n”);</div><div class="line">}</div><div class="line"><span class="comment">//ProcessDebugObjectHandle = 0x1e</span></div><div class="line">(*proc)(GetCurrentProcess(), ProcessDebugObjectHandle, &dwRet, <span class="keyword">sizeof</span>(dwRet), NULL);</div><div class="line"><span class="keyword">if</span> (dwRet != <span class="number">0</span>)</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“Debugger Detected!\n”);</div><div class="line">}</div><div class="line"><span class="keyword">else</span></div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“No Debugger!\n”);</div><div class="line">}</div><div class="line"><span class="comment">//ProcessDebugFlags = 0x1f</span></div><div class="line">(*proc)(GetCurrentProcess(), ProcessDebugFlags, &dwRet, <span class="keyword">sizeof</span>(dwRet), NULL);</div><div class="line"><span class="keyword">if</span> (dwRet == <span class="number">0</span>)</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“Debugger Detected!=%d\n”, dwRet);</div><div class="line">}</div><div class="line"><span class="keyword">else</span></div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“No Debugger!\n”);</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="3-_NtQueryObject">3. <strong>NtQueryObject</strong></h2>
<p>当调试器调试一个进程时，会创建一个调试类型的内核对象，检测系统中是否有调试对象即可判断是否有进程正在被调试。<br>获取内核对象信息链表，遍历链表中对象类型，如果有DebugObject类型对象则说明有程序正在被调试。</p>
<h2 id="4-_ZwSetInformationThread">4. <strong>ZwSetInformationThread</strong></h2>
<p>隐藏线程，使调试器无法接收调试事件。<br>第二个参数是个枚举类型的，这个域可以用来反调试ThreadHideFromDebugger：0×11<br>代码示例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> main()</div><div class="line">{</div><div class="line">MYZWSETINFOMATIONTHREAD proc = NULL;</div><div class="line">proc = (MYZWSETINFOMATIONTHREAD)GetProcAddress(GetModuleHandle(“ntdll.dll”), “ZwSetInformationThread”);</div><div class="line">proc(GetCurrentThread(), ThreadHideFromDebugger, NULL, <span class="number">0</span>);</div><div class="line"><span class="built_in">printf</span>(“done\n”);</div><div class="line">system(“pause”);</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="5-_DebugActiveProcessStop">5. <strong>DebugActiveProcessStop</strong></h2>
<p>这个函数可以把调试器与被调试进程的调试关系解除，这样调试器也就接收不到被调试进程的调试事件了。</p>
<h2 id="6-_FindWindow">6. <strong>FindWindow</strong></h2>
<p>通过这个函数获取调试器窗口的句柄，如果调试器窗口存在就会返回一个非零的值。</p>
<h2 id="7-_TLS回调">7. <strong>TLS回调</strong></h2>
<p>Tls回调函数会优先于EP代码执行，所以可以在函数中写入检测代码，在进程还没有开始运行之前就可以知道是否正在被调试。TLS其实不算反调试技术，只有在结合了其他反调试技术才会有反调试的效果。<br>代码示例:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#include </span></div><div class="line"><span class="preprocessor">#include</span></div><div class="line"><span class="keyword">void</span> NTAPI Tls_Callback(PVOID h, DWORD dwReason, PVOID pv)</div><div class="line">{</div><div class="line"><span class="keyword">if</span>( DLL_PROCESS_ATTACH == dwReason )</div><div class="line">{</div><div class="line"><span class="keyword">if</span> (IsDebuggerPresent())</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“Debugger Detected!\n”);</div><div class="line">}</div><div class="line">}</div><div class="line">}</div><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> comment(linker, “/INCLUDE:__tls_used”)</span></div><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> data_seg(“.CRT$XLX”)</span></div><div class="line">PIMAGE_TLS_CALLBACK pTLS_CALLBACKs[] = { Tls_Callback, <span class="number">0</span> };</div><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> data_seg()</span></div><div class="line"><span class="keyword">int</span> main()</div><div class="line">{</div><div class="line"><span class="built_in">printf</span>(“tls callback anti-debug————\n\n”);</div><div class="line">system(“pause”);</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="8-_SEH">8. <strong>SEH</strong></h2>
<p>1）<br>a.安装seh处理函数<br>b.故意触发一个异常，跳转到刚注册的seh处理函数中<br>c.在seh处理函数中写入检测代码<br>2）<br>a.SetUnhandledExceptionFilter更改默认顶层异常处理函数<br>b.触发异常，跳转到更改过的顶层异常处理函数中<br>c. 在seh处理函数中写入检测代码</p>
<h2 id="9-_进程快照">9. <strong>进程快照</strong></h2>
<p>CreateToolhelp32Snapshot、Process32First、Process32Next<br>这几个函数可以用来建立一个系统正在运行的进程快照，然后遍历进程快照查找是否有常见的调试器进程正在运行也可用作反调试。</p>
<p>本文章转至[三叶草]（<a href="http://syclover.sinaapp.com/?cat=4）" target="_blank" rel="external">http://syclover.sinaapp.com/?cat=4）</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="1-_PEB">1. <strong>PEB</strong></h2>
<p>0×002    BeingDebugged<br>正常运行：0×0        调试态：0×1<br>0x00c    Ldr：指向堆内存区地址<br>调试状态堆内存全部填充为0x]]>
    </summary>
    
      <category term="安全技术" scheme="http://yoursite.com/categories/%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
</feed>
